import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useEffect, useState, useRef } from "react";
import { useObsidianPluginContext } from "../../Context/ObsidianPluginContext";
import Icon from "../Icon/Icon";
import Search from "../Search/Search";
import secondsToMinutesAndSeconds from "../../Utils/secondsToMinutesAndSeconds";
import { PLAYER_STATE } from "src/Types/Enums";
const Header = () => {
    var _a, _b;
    const { localPlayerStateObservable, plugin } = useObsidianPluginContext();
    const [localPlayerState, setLocalPlayerState] = useState(localPlayerStateObservable === null || localPlayerStateObservable === void 0 ? void 0 : localPlayerStateObservable.getValue());
    const titleElementRef = useRef(null);
    const shouldScrollTitle = (titleElementRef === null || titleElementRef === void 0 ? void 0 : titleElementRef.current)
        ? ((_a = titleElementRef === null || titleElementRef === void 0 ? void 0 : titleElementRef.current) === null || _a === void 0 ? void 0 : _a.scrollWidth) >
            ((_b = titleElementRef === null || titleElementRef === void 0 ? void 0 : titleElementRef.current) === null || _b === void 0 ? void 0 : _b.clientWidth)
        : false;
    /**
     * Subscribe to local player state from Obsidian
     */
    useEffect(() => {
        const unsubscribe = localPlayerStateObservable === null || localPlayerStateObservable === void 0 ? void 0 : localPlayerStateObservable.onChange((newState) => {
            setLocalPlayerState(newState);
        });
        return () => {
            unsubscribe === null || unsubscribe === void 0 ? void 0 : unsubscribe();
        };
    }, [setLocalPlayerState]);
    return (_jsxs("div", { className: "soundscapesmymusic-header", children: [_jsx("div", { className: "soundscapesmymusic-left", children: _jsxs("div", { className: "soundscapesmymusic-left-controls", children: [_jsx("button", { className: "soundscapesmymusic-left-controls-button", onClick: () => plugin === null || plugin === void 0 ? void 0 : plugin.previous(), children: _jsx(Icon, { name: "skip-back" }) }), localPlayerState.playerState === PLAYER_STATE.PAUSED && (_jsx("button", { className: "soundscapesmymusic-left-controls-button soundscapesmymusic-left-controls-button--large", onClick: () => plugin === null || plugin === void 0 ? void 0 : plugin.play(), children: _jsx(Icon, { name: "play" }) })), localPlayerState.playerState === PLAYER_STATE.PLAYING && (_jsx("button", { className: "soundscapesmymusic-left-controls-button soundscapesmymusic-left-controls-button--large", onClick: () => plugin === null || plugin === void 0 ? void 0 : plugin.pause(), children: _jsx(Icon, { name: "pause" }) })), _jsx("button", { className: "soundscapesmymusic-left-controls-button", onClick: () => plugin === null || plugin === void 0 ? void 0 : plugin.next(), children: _jsx(Icon, { name: "skip-forward" }) })] }) }), _jsx("div", { className: "soundscapesmymusic-volume", children: _jsx("input", { type: "range", min: "0", max: "100", value: plugin === null || plugin === void 0 ? void 0 : plugin.settings.volume, onChange: (e) => plugin === null || plugin === void 0 ? void 0 : plugin.onVolumeChange(e) }) }), _jsx("div", { className: "soundscapesmymusic-middle", children: localPlayerState.currentTrack && (_jsxs(_Fragment, { children: [_jsxs("div", { className: "soundscapesmymusic-middle-line1", children: [_jsx("div", { className: "soundscapesmymusic-middle-line1-left", children: _jsx("button", { className: `soundscapesmymusic-middle-line1-button ${(plugin === null || plugin === void 0 ? void 0 : plugin.settings.myMusicShuffle) &&
                                            "soundscapesmymusic-middle-line1-button--active"}`, onClick: () => {
                                            plugin === null || plugin === void 0 ? void 0 : plugin.toggleShuffle();
                                        }, children: _jsx(Icon, { name: "shuffle" }) }) }), _jsx("div", { className: `soundscapesmymusic-middle-line1-title ${shouldScrollTitle &&
                                        "soundscapesmymusic-middle-line1-title--scroll"}`, ref: titleElementRef, children: _jsx("span", { className: "soundscapesmymusic-middle-line1-title-text", children: localPlayerState.currentTrack.title }) }), _jsx("div", { className: "soundscapesmymusic-middle-line1-right" })] }), _jsxs("div", { className: "soundscapesmymusic-middle-line2", children: [_jsx("div", { className: "soundscapesmymusic-middle-line2-left", children: secondsToMinutesAndSeconds(localPlayerState.currentTime || 0) }), _jsx("div", { className: "soundscapesmymusic-middle-line2-artist", children: localPlayerState.currentTrack.artist }), _jsxs("div", { className: "soundscapesmymusic-middle-line2-right", children: ["-", secondsToMinutesAndSeconds((localPlayerState.currentTrack.duration ||
                                            0) -
                                            (localPlayerState.currentTime || 0))] })] }), _jsx("input", { type: "range", min: "0", max: "100", step: "0.1", value: ((localPlayerState.currentTime || 0) /
                                (localPlayerState.currentTrack.duration ||
                                    0)) *
                                100, onChange: (e) => {
                                var _a;
                                return plugin === null || plugin === void 0 ? void 0 : plugin.seek((parseInt(e.target.value) / 100) *
                                    (((_a = localPlayerState.currentTrack) === null || _a === void 0 ? void 0 : _a.duration) || 0));
                            }, className: "soundscapesmymusic-middle-seekbar" })] })) }), _jsx("div", { className: "soundscapesmymusic-right", children: _jsx(Search, {}) })] }));
};
export default Header;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSGVhZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSGVhZGVyLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBQ3BELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQy9FLE9BQU8sSUFBSSxNQUFNLGNBQWMsQ0FBQztBQUNoQyxPQUFPLE1BQU0sTUFBTSxrQkFBa0IsQ0FBQztBQUN0QyxPQUFPLDBCQUEwQixNQUFNLHdDQUF3QyxDQUFDO0FBRWhGLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUvQyxNQUFNLE1BQU0sR0FBRyxHQUFHLEVBQUU7O0lBQ25CLE1BQU0sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLEVBQUUsR0FBRyx3QkFBd0IsRUFBRSxDQUFDO0lBQzFFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLFFBQVEsQ0FDdkQsMEJBQTBCLGFBQTFCLDBCQUEwQix1QkFBMUIsMEJBQTBCLENBQUUsUUFBUSxFQUFFLENBQ3RDLENBQUM7SUFDRixNQUFNLGVBQWUsR0FBRyxNQUFNLENBQWlCLElBQUksQ0FBQyxDQUFDO0lBQ3JELE1BQU0saUJBQWlCLEdBQUcsQ0FBQSxlQUFlLGFBQWYsZUFBZSx1QkFBZixlQUFlLENBQUUsT0FBTztRQUNqRCxDQUFDLENBQUMsQ0FBQSxNQUFBLGVBQWUsYUFBZixlQUFlLHVCQUFmLGVBQWUsQ0FBRSxPQUFPLDBDQUFFLFdBQVc7YUFDdkMsTUFBQSxlQUFlLGFBQWYsZUFBZSx1QkFBZixlQUFlLENBQUUsT0FBTywwQ0FBRSxXQUFXLENBQUE7UUFDckMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUVUOztPQUVHO0lBQ0gsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNkLE1BQU0sV0FBVyxHQUFHLDBCQUEwQixhQUExQiwwQkFBMEIs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Q0FBQztBQUNILENBQUMsQ0FBQztBQUVGLGVBQWUsTUFBTSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VPYnNpZGlhblBsdWdpbkNvbnRleHQgfSBmcm9tIFwiLi4vLi4vQ29udGV4dC9PYnNpZGlhblBsdWdpbkNvbnRleHRcIjtcbmltcG9ydCBJY29uIGZyb20gXCIuLi9JY29uL0ljb25cIjtcbmltcG9ydCBTZWFyY2ggZnJvbSBcIi4uL1NlYXJjaC9TZWFyY2hcIjtcbmltcG9ydCBzZWNvbmRzVG9NaW51dGVzQW5kU2Vjb25kcyBmcm9tIFwiLi4vLi4vVXRpbHMvc2Vjb25kc1RvTWludXRlc0FuZFNlY29uZHNcIjtcbmltcG9ydCB7IExvY2FsUGxheWVyU3RhdGUgfSBmcm9tIFwic3JjL1R5cGVzL0ludGVyZmFjZXNcIjtcbmltcG9ydCB7IFBMQVlFUl9TVEFURSB9IGZyb20gXCJzcmMvVHlwZXMvRW51bXNcIjtcblxuY29uc3QgSGVhZGVyID0gKCkgPT4ge1xuXHRjb25zdCB7IGxvY2FsUGxheWVyU3RhdGVPYnNlcnZhYmxlLCBwbHVnaW4gfSA9IHVzZU9ic2lkaWFuUGx1Z2luQ29udGV4dCgpO1xuXHRjb25zdCBbbG9jYWxQbGF5ZXJTdGF0ZSwgc2V0TG9jYWxQbGF5ZXJTdGF0ZV0gPSB1c2VTdGF0ZTxMb2NhbFBsYXllclN0YXRlPihcblx0XHRsb2NhbFBsYXllclN0YXRlT2JzZXJ2YWJsZT8uZ2V0VmFsdWUoKSxcblx0KTtcblx0Y29uc3QgdGl0bGVFbGVtZW50UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcblx0Y29uc3Qgc2hvdWxkU2Nyb2xsVGl0bGUgPSB0aXRsZUVsZW1lbnRSZWY/LmN1cnJlbnRcblx0XHQ/IHRpdGxlRWxlbWVudFJlZj8uY3VycmVudD8uc2Nyb2xsV2lkdGggPlxuXHRcdHRpdGxlRWxlbWVudFJlZj8uY3VycmVudD8uY2xpZW50V2lkdGhcblx0XHQ6IGZhbHNlO1xuXG5cdC8qKlxuXHQgKiBTdWJzY3JpYmUgdG8gbG9jYWwgcGxheWVyIHN0YXRlIGZyb20gT2JzaWRpYW5cblx0ICovXG5cdHVzZUVmZmVjdCgoKSA9PiB7XG5cdFx0Y29uc3QgdW5zdWJzY3JpYmUgPSBsb2NhbFBsYXllclN0YXRlT2JzZXJ2YWJsZT8ub25DaGFuZ2UoXG5cdFx0XHQobmV3U3RhdGU6IExvY2FsUGxheWVyU3RhdGUpID0+IHtcblx0XHRcdFx0c2V0TG9jYWxQbGF5ZXJTdGF0ZShuZXdTdGF0ZSk7XG5cdFx0XHR9LFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dW5zdWJzY3JpYmU/LigpO1xuXHRcdH07XG5cdH0sIFtzZXRMb2NhbFBsYXllclN0YXRlXSk7XG5cblx0cmV0dXJuIChcblx0XHQ8ZGl2IGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1oZWFkZXJcIj5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwic291bmRzY2FwZXNteW11c2ljLWxlZnRcIj5cblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJzb3VuZHNjYXBlc215bXVzaWMtbGVmdC1jb250cm9sc1wiPlxuXHRcdFx0XHRcdDxidXR0b25cblx0XHRcdFx0XHRcdGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1sZWZ0LWNvbnRyb2xzLWJ1dHRvblwiXG5cdFx0XHRcdFx0XHRvbkNsaWNrPXsoKSA9PiBwbHVnaW4/LnByZXZpb3VzKCl9XG5cdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0PEljb24gbmFtZT1cInNraXAtYmFja1wiIC8+XG5cdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0e2xvY2FsUGxheWVyU3RhdGUucGxheWVyU3RhdGUgPT09IFBMQVlFUl9TVEFURS5QQVVTRUQgJiYgKFxuXHRcdFx0XHRcdFx0PGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRjbGFzc05hbWU9XCJzb3VuZHNjYXBlc215bXVzaWMtbGVmdC1jb250cm9scy1idXR0b24gc291bmRzY2FwZXNteW11c2ljLWxlZnQtY29udHJvbHMtYnV0dG9uLS1sYXJnZVwiXG5cdFx0XHRcdFx0XHRcdG9uQ2xpY2s9eygpID0+IHBsdWdpbj8ucGxheSgpfVxuXHRcdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0XHQ8SWNvbiBuYW1lPVwicGxheVwiIC8+XG5cdFx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0XHQpfVxuXHRcdFx0XHRcdHtsb2NhbFBsYXllclN0YXRlLnBsYXllclN0YXRlID09PSBQTEFZRVJfU1RBVEUuUExBWUlORyAmJiAoXG5cdFx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRcdGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1sZWZ0LWNvbnRyb2xzLWJ1dHRvbiBzb3VuZHNjYXBlc215bXVzaWMtbGVmdC1jb250cm9scy1idXR0b24tLWxhcmdlXCJcblx0XHRcdFx0XHRcdFx0b25DbGljaz17KCkgPT4gcGx1Z2luPy5wYXVzZSgpfVxuXHRcdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0XHQ8SWNvbiBuYW1lPVwicGF1c2VcIiAvPlxuXHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0KX1cblx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRjbGFzc05hbWU9XCJzb3VuZHNjYXBlc215bXVzaWMtbGVmdC1jb250cm9scy1idXR0b25cIlxuXHRcdFx0XHRcdFx0b25DbGljaz17KCkgPT4gcGx1Z2luPy5uZXh0KCl9XG5cdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0PEljb24gbmFtZT1cInNraXAtZm9yd2FyZFwiIC8+XG5cdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy12b2x1bWVcIj5cblx0XHRcdFx0PGlucHV0XG5cdFx0XHRcdFx0dHlwZT1cInJhbmdlXCJcblx0XHRcdFx0XHRtaW49XCIwXCJcblx0XHRcdFx0XHRtYXg9XCIxMDBcIlxuXHRcdFx0XHRcdHZhbHVlPXtwbHVnaW4/LnNldHRpbmdzLnZvbHVtZX1cblx0XHRcdFx0XHRvbkNoYW5nZT17KGUpID0+IHBsdWdpbj8ub25Wb2x1bWVDaGFuZ2UoZSl9XG5cdFx0XHRcdC8+XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwic291bmRzY2FwZXNteW11c2ljLW1pZGRsZVwiPlxuXHRcdFx0XHR7bG9jYWxQbGF5ZXJTdGF0ZS5jdXJyZW50VHJhY2sgJiYgKFxuXHRcdFx0XHRcdDw+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1taWRkbGUtbGluZTFcIj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJzb3VuZHNjYXBlc215bXVzaWMtbWlkZGxlLWxpbmUxLWxlZnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzc05hbWU9e2Bzb3VuZHNjYXBlc215bXVzaWMtbWlkZGxlLWxpbmUxLWJ1dHRvbiAke3BsdWdpbj8uc2V0dGluZ3MubXlNdXNpY1NodWZmbGUgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJzb3VuZHNjYXBlc215bXVzaWMtbWlkZGxlLWxpbmUxLWJ1dHRvbi0tYWN0aXZlXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fWB9XG5cdFx0XHRcdFx0XHRcdFx0XHRvbkNsaWNrPXsoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbj8udG9nZ2xlU2h1ZmZsZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fX1cblx0XHRcdFx0XHRcdFx0XHQ+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8SWNvbiBuYW1lPVwic2h1ZmZsZVwiIC8+XG5cdFx0XHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHQ8ZGl2XG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lPXtgc291bmRzY2FwZXNteW11c2ljLW1pZGRsZS1saW5lMS10aXRsZSAke3Nob3VsZFNjcm9sbFRpdGxlICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcInNvdW5kc2NhcGVzbXltdXNpYy1taWRkbGUtbGluZTEtdGl0bGUtLXNjcm9sbFwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9YH1cblx0XHRcdFx0XHRcdFx0XHRyZWY9e3RpdGxlRWxlbWVudFJlZn1cblx0XHRcdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1taWRkbGUtbGluZTEtdGl0bGUtdGV4dFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0e2xvY2FsUGxheWVyU3RhdGUuY3VycmVudFRyYWNrLnRpdGxlfVxuXHRcdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwic291bmRzY2FwZXNteW11c2ljLW1pZGRsZS1saW5lMS1yaWdodFwiPjwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1taWRkbGUtbGluZTJcIj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJzb3VuZHNjYXBlc215bXVzaWMtbWlkZGxlLWxpbmUyLWxlZnRcIj5cblx0XHRcdFx0XHRcdFx0XHR7c2Vjb25kc1RvTWludXRlc0FuZFNlY29uZHMoXG5cdFx0XHRcdFx0XHRcdFx0XHRsb2NhbFBsYXllclN0YXRlLmN1cnJlbnRUaW1lIHx8IDAsXG5cdFx0XHRcdFx0XHRcdFx0KX1cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwic291bmRzY2FwZXNteW11c2ljLW1pZGRsZS1saW5lMi1hcnRpc3RcIj5cblx0XHRcdFx0XHRcdFx0XHR7bG9jYWxQbGF5ZXJTdGF0ZS5jdXJyZW50VHJhY2suYXJ0aXN0fVxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJzb3VuZHNjYXBlc215bXVzaWMtbWlkZGxlLWxpbmUyLXJpZ2h0XCI+XG5cdFx0XHRcdFx0XHRcdFx0LVxuXHRcdFx0XHRcdFx0XHRcdHtzZWNvbmRzVG9NaW51dGVzQW5kU2Vjb25kcyhcblx0XHRcdFx0XHRcdFx0XHRcdChsb2NhbFBsYXllclN0YXRlLmN1cnJlbnRUcmFjay5kdXJhdGlvbiB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQwKSAtXG5cdFx0XHRcdFx0XHRcdFx0XHQobG9jYWxQbGF5ZXJTdGF0ZS5jdXJyZW50VGltZSB8fCAwKSxcblx0XHRcdFx0XHRcdFx0XHQpfVxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGlucHV0XG5cdFx0XHRcdFx0XHRcdHR5cGU9XCJyYW5nZVwiXG5cdFx0XHRcdFx0XHRcdG1pbj1cIjBcIlxuXHRcdFx0XHRcdFx0XHRtYXg9XCIxMDBcIlxuXHRcdFx0XHRcdFx0XHRzdGVwPVwiMC4xXCJcblx0XHRcdFx0XHRcdFx0dmFsdWU9e1xuXHRcdFx0XHRcdFx0XHRcdCgobG9jYWxQbGF5ZXJTdGF0ZS5jdXJyZW50VGltZSB8fCAwKSAvXG5cdFx0XHRcdFx0XHRcdFx0XHQobG9jYWxQbGF5ZXJTdGF0ZS5jdXJyZW50VHJhY2suZHVyYXRpb24gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0MCkpICpcblx0XHRcdFx0XHRcdFx0XHQxMDBcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRvbkNoYW5nZT17KGUpID0+XG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luPy5zZWVrKFxuXHRcdFx0XHRcdFx0XHRcdFx0KHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSAvIDEwMCkgKlxuXHRcdFx0XHRcdFx0XHRcdFx0KGxvY2FsUGxheWVyU3RhdGUuY3VycmVudFRyYWNrXG5cdFx0XHRcdFx0XHRcdFx0XHRcdD8uZHVyYXRpb24gfHwgMCksXG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1taWRkbGUtc2Vla2JhclwiXG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdDwvPlxuXHRcdFx0XHQpfVxuXHRcdFx0PC9kaXY+XG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInNvdW5kc2NhcGVzbXltdXNpYy1yaWdodFwiPlxuXHRcdFx0XHQ8U2VhcmNoIC8+XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj5cblx0KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjtcbiJdfQ==